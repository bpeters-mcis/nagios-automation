#!/usr/bin/php -c /etc/php.ini

<?php
 
 array_shift($argv); 
 $f_notify_type =array_shift($argv);
 $f_host_name =array_shift($argv);
 $f_host_alias =array_shift($argv);
 $f_host_state =array_shift($argv);
 $f_host_address =array_shift($argv);
 $f_host_output =array_shift($argv);
 $f_long_date =array_shift($argv);
 $f_serv_desc  =array_shift($argv);
 $f_serv_state  =array_shift($argv);
 $f_to  =array_shift($argv);
 $f_totalup  =array_shift($argv);
 $f_totaldown=array_shift($argv); 

 $subject = "$f_notify_type Service:$f_host_name";
 
 $from  ="nagios@winmon.emich.edu";
 $body = "<html><body><h3 style='color: #006600'>Eastern Michigan University - Division of IT: Host Report Details</h3><br><b>Notification: </b> <font color=#CC0000>$f_notify_type</font><br/> \r\n";
 $body .= "<b>Host: </b> <font color=#007700>$f_host_alias</font> </br> \r\n";
 $body .= "<b>Address: </b> <font color=#005555>$f_host_address</font><br/> \r\n";
 $body .= "<b>Date/Time: </b><font color=#005555>$f_long_date</font><br/> \r\n";
 $body .= "<b>Additional Info: </b>$f_host_output<br/> \r\n";
 $body .= "<b>Total Servers Up: </b>$f_totalup<br/>";
 $body .= "<b>Total Servers Down: </b>$f_totaldown<br/> \r\n";
 $body .= "<b>Why Am I Getting This Notification?</b><br>\r\n";
 $body .= "You are getting this notification because you have been identified as a contact for this server/service, either personally, or because you belong to a team that was listed.<br/><br> \r\n";
 $body .= "<b>What Should I Do?</b><br>\r\n";
 $body .= "The IT Windows Team will reach out to you for further instructions.  If you do anything on this server before then, please notify them at windowsteam@emich.edu to avoid any duplication of efforts.<br/><br> \r\n";
 $body .= "<br/> \r\n";
 $body .= "</body></html> \r\n";
 
 $headers = "From: $from\r\n";
 $headers = $headers."Content-type: text/html\r\n"; 

 /* Send eMail Now... */
 mail($f_to, $subject, $body, $headers);



?>


